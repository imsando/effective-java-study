# ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼

## â›³ï¸ ëª©í‘œ

ë¶ˆí•„ìš”í•˜ê²Œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ê°ì²´ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´í•´í•˜ì

<br>

## ğŸ“„Â í•µì‹¬ ìš”ì•½

***ë©”ëª¨ë¦¬ì™€ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ì„œ***

- ë¶ˆí•„ìš”í•œ ê°ì²´ëŠ” ìƒì„±í•˜ì§€ ë§ì
- ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ ë¶ˆë³€ ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ì
- ì˜¤í† ë°•ì‹±ì„ ì£¼ì˜í•˜ì

<br>

## ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± Case

### 1ï¸âƒ£Â new String(â€í•„ìš”ì—†ëŠ” ê°ì²´â€)

Stringì„ ì•„ë˜ì²˜ëŸ¼ ìƒˆë¡œìš´ ê°ì²´ë¡œ í• ë‹¹í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```java
String string = new String("woojoo");
```

- Heap ë©”ëª¨ë¦¬ ì˜ì—­ì— ê°ì²´ê°€ ìƒì„±ë˜ë©° ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ëœë‹¤.
- Constant poolì— ì €ì¥ë˜ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ì€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë¦¬í„°ëŸ´ì˜ ì£¼ì†Œ ê°’ì„ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br>

### 2ï¸âƒ£Â ê³„ì† ìƒì„±ë˜ëŠ” ê°ì²´

`String.matches()`ëŠ” ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ë¬¸ìì—´ í˜•íƒœë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©ëœë‹¤.

```java
static boolean isRonamNumeral(String s) {
	return s.matches("^(?=.)M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");
}
```

í•˜ì§€ë§Œ ê²°êµ­ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œë¥¼ í™•ì¸í•´ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ new ìƒì„±ìë¥¼ í†µí•´ Pattern ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ë‚´ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

```java
public static Pattern compile(String regex) {    
	return new Pattern(regex, 0);
}
```

- Stringì„ ê°ì²´ë¡œ ìƒì„±í–ˆì„ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ Pattern ê°ì²´ë„ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ëœë‹¤.
- ì •ê·œ í‘œí˜„ì‹ì„ ì»´íŒŒì¼í•˜ëŠ” ê³¼ì • ìì²´ê°€ ë³µì¡í•˜ê³  ìµœì í™”ëœ ìƒíƒœë¡œ ë³€í™˜í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê³„ì‚° ë¹„ìš©ì´ ë†’ë‹¤.

<br>

***ê°œì„  ì½”ë“œ***

ë°˜ë³µì ìœ¼ë¡œ ê°™ì€ íŒ¨í„´ì„ ì‚¬ìš©í•  ë•Œ ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ë©´ ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.

```java
public class RomanNumber {

    private static final Pattern ROMAN = Pattern.compile("^(?=.)M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");

    static boolean isRomanNumeral(String s) {
        return ROMAN.matcher(s).matches();
    }
}
```

<br>

## íš¨ìœ¨ì ì´ê³  ì•ˆì „í•œ ê°ì²´ ìƒì„± Case

### 1ï¸âƒ£Â ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ

- ë¶ˆë³€ ê°ì²´ë§Œì´ ì•„ë‹ˆë¼ ê°€ë³€ ê°ì²´ì¼ì§€ë¼ë„ ì¤‘ê°„ì— ì¬ì‚¬ìš©í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- [[ì•„ì´í…œ 1]](https://github.com/LeeSeunghyeon-1/effective-java-study/blob/main/Ch02/%5BItem01%5D%20%EC%83%9D%EC%84%B1%EC%9E%90_%EB%8C%80%EC%8B%A0_%EC%A0%95%EC%A0%81_%ED%8C%A9%ED%84%B0%EB%A6%AC_%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC_%EA%B3%A0%EB%A0%A4%ED%95%98%EB%9D%BC.md)

<br>

### 2ï¸âƒ£Â ì–´ëŒ‘í„°

ì‹¤ì œ ì‘ì—…ì€ ë’·ë‹¨ ê°ì²´ì— ìœ„ì„í•˜ê³  ìì‹ ì€ ì œ2ì˜ ì¸í„°í˜ì´ìŠ¤ ì—­í• ì„ í•´ì£¼ëŠ” ê°ì²´ì´ë‹¤.

```java
// ì¶œì²˜ : gihub.com/keesun/study

public class UsingKeySet {

    public static void main(String[] args) {
        Map<String, Integer> menu = new HashMap<>();
        menu.put("Burger", 8);
        menu.put("Pizza", 9);

        Set<String> names1 = menu.keySet();
        Set<String> names2 = menu.keySet();

        names1.remove("Burger");
        System.out.println(names2.size()); // 1
        System.out.println(menu.size()); // 1
    }
}
```

- keySetì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ê°™ì€ Set ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
- ê·¸ëŸ¬ë¯€ë¡œ names1ì—ì„œ â€œBurgerâ€ë¥¼ ì œê±°í–ˆì„ ë•Œ ëª¨ë“  ê³³ì—ì„œ ë‹¤ ì œê±°ëœë‹¤.

<br>

### 3ï¸âƒ£Â ì˜¤í† ë°•ì‹± (ì£¼ì˜)

ê¸°ë³¸ íƒ€ì…ê³¼ ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ì„ ì„ì–´ ì“¸ ë•Œ ìë™ìœ¼ë¡œ ìƒí˜¸ ë³€í™˜í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤.

```java
public class AutoBoxingExample {

    public static void main(String[] args) {
        long start = System.currentTimeMillis();
        Long sum = 0l;
        for (long i = 0 ; i <= Integer.MAX_VALUE ; i++) {
            sum += i;
        }
        System.out.println(sum);
        System.out.println(System.currentTimeMillis() - start);
    }
}
```

- sum ë³€ìˆ˜ë¥¼ longì´ ì•„ë‹Œ Longìœ¼ë¡œ ì„ ì–¸í•´ì„œ iê°€ sumì— ë”í•´ì§ˆ ë•Œë§ˆë‹¤ Long ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì§„ë‹¤.
- sum íƒ€ì…ì„ longìœ¼ë¡œ ë°”ê¿”ì£¼ë©´ ì†ë„ê°€ ì•½ 10ë°° ì´ìƒ ë¹¨ë¼ì§„ë‹¤.
- ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ , ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹±ì´ ìˆ¨ì–´ë“¤ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì.

<br>

### 4ï¸âƒ£Â ë°©ì–´ì  ë³µì‚¬(Defensive Copying)

ê°ì²´ì˜ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ê±°ë‚˜ ì™¸ë¶€ì—ì„œ ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê¸°ë²•ì´ë‹¤.

**[ëª©ì ]**

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ ê°ì²´ì˜ ìƒíƒœë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤.
- ë¶ˆë³€ì„±ì„ ë³´ì¥í•˜ì—¬ ì˜ë„ì¹˜ì•Šì€ ë²„ê·¸ë¥¼ ë°©ì§€í•œë‹¤.

<br>

**[ì˜ˆì œ ì½”ë“œ]**

***Constructor***

ì›ë³¸ ê°ì²´ë¥¼ ë³µì‚¬í•œ í›„ ì €ì¥í•˜ê±°ë‚˜ ë°˜í™˜í•œë‹¤.

```java
public class Period {
    private final Date start;
    private final Date end;

    public Period(Date start, Date end) {
        this.start = new Date(start.getTime()); // ë°©ì–´ì  ë³µì‚¬
        this.end = new Date(end.getTime());     // ë°©ì–´ì  ë³µì‚¬
    }

    public Date getStart() {
        return new Date(start.getTime()); // ë°©ì–´ì  ë³µì‚¬
    }

    public Date getEnd() {
        return new Date(end.getTime());   // ë°©ì–´ì  ë³µì‚¬
    }
}

```

***Getter***

getter ë©”ì„œë“œë¡œ ë‚´ë¶€ mutable ê°ì²´ë¥¼ ì™¸ë¶€ì— ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ë©´ ì™¸ë¶€ì—ì„œ í•´ë‹¹ ê°ì²´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë°˜í™˜í•˜ê¸° ì „ì— í•´ë‹¹ ê°ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ ë°˜í™˜í•œë‹¤.

```java
public List<String> getValues() {
    return new ArrayList<>(values); // ë°©ì–´ì  ë³µì‚¬
}

```

<br>

**[ì¥ì ]**

- ê°ì²´ì˜ ë¶ˆë³€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
- ì™¸ë¶€ ì½”ë“œê°€ ë‚´ë¶€ ê°ì²´ì˜ ìƒíƒœë¥¼ ì§ì ‘ ë³€ê²½í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ì—¬ ì•ˆì „ì„±ì„ ë†’ì¸ë‹¤.
- ì˜ˆê¸°ì¹˜ ì•Šì€ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥ì„±ì„ ì¤„ì¸ë‹¤.

<br>

**[ë‹¨ì ]**

- ê°ì²´ë¥¼ ë³µì‚¬í•˜ëŠ” ì„±ëŠ¥ ë¹„ìš©ì´ ë°œìƒí•œë‹¤. (ë³µì‚¬í•´ì•¼ í•  ê°ì²´ê°€ ë§ê±°ë‚˜ í¬ë‹¤ë©´ ë¶€ì •ì )
- ì½”ë“œê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.