# μμ›μ„ μ§μ ‘ λ…μ‹ν•μ§€ λ§κ³  μμ΅΄ κ°μ²΄ μ£Όμ…μ„ μ‚¬μ©ν•λΌ

## β›³οΈ λ©ν‘

μμ΅΄μ„± μ£Όμ… κΈ°λ²•κ³Ό μ¥μ μ„ μ•μ•„ λ³΄μ

## π“„Β ν•µμ‹¬ μ”μ•½

***μμ΅΄ κ°μ²΄ μ£Όμ… κΈ°λ²•μ€***

- ν΄λμ¤κ°€ λ‚΄λ¶€μ μΌλ΅ ν•λ‚ μ΄μƒμ μμ›μ— μμ΅΄ν•  λ• μ‚¬μ©ν•  μ μλ‹¤.
- ν΄λμ¤μ μ μ—°μ„±, μ¬μ‚¬μ©μ„±, ν…μ¤νΈ μ©μ΄μ„±μ„ κ°μ„ ν•  μ μλ‹¤.

---

## μμ΅΄μ„± μ£Όμ…(DI, Dependency Injection)

### μ „ν†µμ μΈ λ°©μ‹

ν΄λμ¤κ°€ μ—¬λ¬ μμ› μΈμ¤ν„΄μ¤λ¥Ό μ§€μ›ν•΄μ•Ό ν•λ©°, ν΄λΌμ΄μ–ΈνΈκ°€ μ›ν•λ” μμ›μ„ μ‚¬μ©ν•΄μ•Ό ν•  λ• μ–΄λ–»κ² ν•΄μ•Ό ν• κΉ?

```java
public class SpellChecker {
	
	private final Lexicon dictionary;
	
	public SpellChecker(Lexicon dictionary) {
		this.dictionary = Objects.requireNonNull(dictionary);
	}
	
	public boolean isValid(String word) {...}
	public List<String> suggestions(String typo) {...}
}
```

μμ΅΄μ„± κ°μ²΄λ¥Ό ν•„λ“λ¥Ό ν†µν•΄ μ£Όμ…ν•λ‹¤.

<br>

**[μ¥μ ]**

- λ¶λ³€μ„ λ³΄μ¥ν•κΈ° λ•λ¬Έμ— λ©€ν‹°μ¤λ λ“ ν™κ²½μ—μ„ λ¬Έμ μ—†μ΄ μ‚¬μ©ν•  μ μλ‹¤.

<br>

**[λ‹¨μ ]**

- μμ΅΄μ„±μ΄ λ§μ•„μ§€λ©΄ μ½”λ“κ°€ μ§€μ €λ¶„ν•΄ μ§ μ μλ‹¤.
- μ΄λ•λ” μμ΅΄ κ°μ²΄ μ£Όμ… ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•μ. (e.g Dagger, Guice, Spring)

<br>

### Supplier<T> μΈν„°νμ΄μ¤λ¥Ό ν™μ©ν• λ°©μ‹

**Supplier<T>**

```java
@FunctionalInterface
public interface Supplier<T> {
    T get();
}
```

- μλ°” 8μ— λ„μ…λ ν•¨μν• μΈν„°νμ΄μ¤λ΅, νλΌλ―Έν„° μ—†μ΄ κ°μ²΄λ¥Ό λ°ν™ν•λ” λ©”μ†λ“λ¥Ό μ •μν•λ‹¤.
- νΈμ¶λ  λ•λ§λ‹¤ κ°μ²΄λ¥Ό μ κ³µν•λ” μ—­ν• μ„ ν•λ‹¤.

<br>

[μμ ]

***Service.class***

```java
// Service class
class Service {

	private final Supplier<Dependency> dependencySupplier;
	
	public Service(Supplier<Dependency> dependencySupplier) {
	    this.dependencySupplier = dependencySupplier;
	}
	
	public void doWork() {
	    Dependency dependency = dependencySupplier.get(); // ν•„μ”ν•  λ•λ§λ‹¤ κ°μ²΄λ¥Ό κ°€μ Έμ΄
	    dependency.performTask();
	}
}

```

<br>

***ν΄λΌμ΄μ–ΈνΈ μ½”λ“*** > Supplierλ¥Ό μ‚¬μ©ν•΄ κ°μ²΄ λ™μ  μƒμ„± λ° μμ΅΄μ„± μ£Όμ…

```java

public class Main {
    public static void main(String[] args) {
        // Supplierλ¥Ό μ‚¬μ©ν•μ—¬ Dependency κ°μ²΄λ¥Ό ν•„μ”ν•  λ• μƒμ„±
        Supplier<Dependency> dependencyFactory = () -> new Dependency();

        // Serviceμ— Supplierλ¥Ό μ£Όμ…
        Service service = new Service(dependencyFactory);
        
        service.doWork();
    }
}
```

<br>

**[μ¥μ ]**

- `λ™μ  κ°μ²΄ μƒμ„±` : κ°™μ€ μΈν„°νμ΄μ¤λ΅ μ„λ΅ λ‹¤λ¥Έ κµ¬ν„μ²΄λ¥Ό μƒν™©μ— λ§κ² λ™μ μΌλ΅ λ°ν™ν•  μ μλ‹¤.
    - `ν•μ •μ  μ™€μΌλ“ μΉ΄λ“ νƒ€μ…(bounded wildcard type)`μ„ μ‚¬μ©ν•΄ ν©ν„°λ¦¬μ νƒ€μ… λ§¤κ°λ³€μλ¥Ό μ ν•ν•λ©΄ ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ΄ λ…μ‹ν• νƒ€μ…μ ν•μ„ νƒ€μ…μ΄λΌλ©΄ λ¬΄μ—‡μ΄λ“  μƒμ„±ν•  μ μλ” ν©ν„°λ¦¬λ¥Ό λ„κΈΈ μ μλ‹¤.
- `μ§€μ—° μ΄κΈ°ν™”` : κ°μ²΄λ¥Ό ν•„μ”ν•  λ• μƒμ„±ν•  μ μμ–΄ μ„±λ¥ μµμ ν™”λ‚ λ©”λ¨λ¦¬ μ μ•½μ— λ„μ›€μ΄ λλ‹¤.

---

### λ²μ™Έ. κ·Έλμ„ DIλ” μ™ μ‚¬μ©ν•λ” κ±ΈκΉ?

**1οΈβƒ£Β μ μ—°μ„± ν–¥μƒ**

μμ›μ„ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•κ² λλ―€λ΅ ν΄λμ¤λ” κ°μ²΄ μƒμ„±μ— λ€ν• μ±…μ„μ„ μ§€μ§€ μ•μ•„λ„ λκ³  μ™Έλ¶€ μ„¤μ •μ— λ”°λΌ λ‹¤μ–‘ν• κ°μ²΄λ¥Ό μ£Όμ…ν•  μ μλ‹¤.

<br>

2οΈβƒ£Β **μ½”λ“ μ¬μ‚¬μ©μ„± μ¦κ°€ λ° μ μ§€λ³΄μμ„± ν–¥μƒ**

μμ΅΄μ„±μ„ μ§μ ‘ λ…μ‹ν•μ§€ μ•μΌλ―€λ΅ ν΄λμ¤κ°€ κµ¬μ²΄μ μΈ κµ¬ν„μ— μΆ…μ†λμ§€ μ•κ³  μ¶”μƒν™”λ μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μμ΅΄μ„±μ„ ν•΄κ²°ν•  μ μλ‹¤.

- ν΄λμ¤ κ°„μ κ²°ν•©λ„(coupling)μ„ λ‚®μ¶λ‹¤.
- λ‹¤μ–‘ν• μƒν™©μ— λ§μ¶ μ μ—°ν• κµ¬ν„μ΄ κ°€λ¥ν•΄μ§„λ‹¤.

<br>

**3οΈβƒ£Β ν…μ¤νΈ μ©μ΄μ„±**

μμ΅΄μ„± μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ ν…μ¤νΈ μ‹μ— λ©(Mock) κ°μ²΄λ¥Ό μ£Όμ…ν•  μ μμ–΄ μ‹¤μ  μμ›μ— μμ΅΄ν•μ§€ μ•κ³  ν…μ¤νΈκ°€ κ°€λ¥ν•λ‹¤.

```java
Supplier<Dependency> mockDependencySupplier = () -> new MockDependency();
Service service = new Service(mockDependencySupplier);
```

- λΉ„μ©μ΄ ν° μμ›(λ„¤νΈμ›ν¬ νΈμ¶, λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° λ“±)μ„ μ‹¤μ λ΅ μ‚¬μ©ν•  ν•„μ” μ—†μ΄ ν…μ¤νΈ μ‹μ— λΉ λ¥΄κ³  κ°„νΈν•κ² μ‹λ®¬λ μ΄μ…ν•  μ μλ‹¤.

<br>

4οΈβƒ£Β **λ‹¨μΌ μ±…μ„ μ›μΉ™(SRP) μ¤€μ**

κ°μ²΄ μƒμ„±μ„ μ™Έλ¶€μ—μ„ λ‹΄λ‹Ήν•κΈ° λ•λ¬Έμ— ν΄λμ¤λ” μ¤μ§ λΉ„μ¦λ‹μ¤ λ΅μ§μ—λ§ μ§‘μ¤‘ν•  μ μλ‹¤.